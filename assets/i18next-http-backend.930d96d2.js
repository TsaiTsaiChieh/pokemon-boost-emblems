import{c as w}from"./@babel.d42c85a2.js";import{r as E}from"./cross-fetch.12475e7a.js";function L(o,t){for(var n=0;n<t.length;n++){const e=t[n];if(typeof e!="string"&&!Array.isArray(e)){for(const i in e)if(i!=="default"&&!(i in o)){const r=Object.getOwnPropertyDescriptor(e,i);r&&Object.defineProperty(o,i,r.get?r:{enumerable:!0,get:()=>e[i]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}function q(o){return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(o)}var X=[],C=X.forEach,I=X.slice;function O(o){return C.call(I.call(arguments,1),function(t){if(t)for(var n in t)o[n]===void 0&&(o[n]=t[n])}),o}function _(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":q(XMLHttpRequest))==="object"}function U(o){return!!o&&typeof o.then=="function"}function D(o){return U(o)?o:Promise.resolve(o)}function F(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var v={exports:{}};(function(o,t){var n;if(typeof fetch=="function"&&(typeof w<"u"&&w.fetch?n=w.fetch:typeof window<"u"&&window.fetch?n=window.fetch:n=fetch),typeof F<"u"&&(typeof window>"u"||typeof window.document>"u")){var e=n||E();e.default&&(e=e.default),t.default=e,o.exports=t.default}})(v,v.exports);const A=v.exports,P=L({__proto__:null,default:A},[v.exports]);function g(o){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(o)}var p;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?p=global.fetch:typeof window<"u"&&window.fetch?p=window.fetch:p=fetch);var y;_()&&(typeof global<"u"&&global.XMLHttpRequest?y=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(y=window.XMLHttpRequest));var m;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?m=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(m=window.ActiveXObject));!p&&P&&!y&&!m&&(p=A||P);typeof p!="function"&&(p=void 0);var b=function(t,n){if(n&&g(n)==="object"){var e="";for(var i in n)e+="&"+encodeURIComponent(i)+"="+encodeURIComponent(n[i]);if(!e)return t;t=t+(t.indexOf("?")!==-1?"&":"?")+e.slice(1)}return t},S=function(t,n,e){p(t,n).then(function(i){if(!i.ok)return e(i.statusText||"Error",{status:i.status});i.text().then(function(r){e(null,{status:i.status,data:r})}).catch(e)}).catch(e)},H=!1,W=function(t,n,e,i){t.queryStringParams&&(n=b(n,t.queryStringParams));var r=O({},typeof t.customHeaders=="function"?t.customHeaders():t.customHeaders);e&&(r["Content-Type"]="application/json");var s=typeof t.requestOptions=="function"?t.requestOptions(e):t.requestOptions,a=O({method:e?"POST":"GET",body:e?t.stringify(e):void 0,headers:r},H?{}:s);try{S(n,a,i)}catch(f){if(!s||Object.keys(s).length===0||!f.message||f.message.indexOf("not implemented")<0)return i(f);try{Object.keys(s).forEach(function(u){delete a[u]}),S(n,a,i),H=!0}catch(u){i(u)}}},B=function(t,n,e,i){e&&g(e)==="object"&&(e=b("",e).slice(1)),t.queryStringParams&&(n=b(n,t.queryStringParams));try{var r;y?r=new y:r=new m("MSXML2.XMLHTTP.3.0"),r.open(e?"POST":"GET",n,1),t.crossDomain||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.withCredentials=!!t.withCredentials,e&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.overrideMimeType&&r.overrideMimeType("application/json");var s=t.customHeaders;if(s=typeof s=="function"?s():s,s)for(var a in s)r.setRequestHeader(a,s[a]);r.onreadystatechange=function(){r.readyState>3&&i(r.status>=400?r.statusText:null,{status:r.status,data:r.responseText})},r.send(e)}catch(f){console&&console.log(f)}},N=function(t,n,e,i){if(typeof e=="function"&&(i=e,e=void 0),i=i||function(){},p)return W(t,n,e,i);if(_()||typeof ActiveXObject=="function")return B(t,n,e,i);i(new Error("No fetch and no xhr implementation found!"))};function G(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function R(o,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function $(o,t,n){return t&&R(o.prototype,t),n&&R(o,n),Object.defineProperty(o,"prototype",{writable:!1}),o}function J(o,t,n){return t in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}var Q=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,e,i){return J({},e,i||"")},request:N,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},k=function(){function o(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};G(this,o),this.services=t,this.options=n,this.allOptions=e,this.type="backend",this.init(t,n,e)}return $(o,[{key:"init",value:function(n){var e=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=O(i,this.options||{},Q()),this.allOptions=r,this.services&&this.options.reloadInterval&&setInterval(function(){return e.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(n,e,i){this._readAny(n,n,e,e,i)}},{key:"read",value:function(n,e,i){this._readAny([n],n,[e],e,i)}},{key:"_readAny",value:function(n,e,i,r,s){var a=this,f=this.options.loadPath;typeof this.options.loadPath=="function"&&(f=this.options.loadPath(n,i)),f=D(f),f.then(function(u){if(!u)return s(null,{});var c=a.services.interpolator.interpolate(u,{lng:n.join("+"),ns:i.join("+")});a.loadUrl(c,s,e,r)})}},{key:"loadUrl",value:function(n,e,i,r){var s=this;this.options.request(this.options,n,void 0,function(a,f){if(f&&(f.status>=500&&f.status<600||!f.status))return e("failed loading "+n+"; status code: "+f.status,!0);if(f&&f.status>=400&&f.status<500)return e("failed loading "+n+"; status code: "+f.status,!1);if(!f&&a&&a.message&&a.message.indexOf("Failed to fetch")>-1)return e("failed loading "+n+": "+a.message,!0);if(a)return e(a,!1);var u,c;try{typeof f.data=="string"?u=s.options.parse(f.data,i,r):u=f.data}catch{c="failed parsing "+n+" to json"}if(c)return e(c,!1);e(null,u)})}},{key:"create",value:function(n,e,i,r,s){var a=this;if(!!this.options.addPath){typeof n=="string"&&(n=[n]);var f=this.options.parsePayload(e,i,r),u=0,c=[],d=[];n.forEach(function(l){var h=a.options.addPath;typeof a.options.addPath=="function"&&(h=a.options.addPath(l,e));var M=a.services.interpolator.interpolate(h,{lng:l,ns:e});a.options.request(a.options,M,f,function(j,T){u+=1,c.push(j),d.push(T),u===n.length&&s&&s(c,d)})})}}},{key:"reload",value:function(){var n=this,e=this.services,i=e.backendConnector,r=e.languageUtils,s=e.logger,a=i.language;if(!(a&&a.toLowerCase()==="cimode")){var f=[],u=function(d){var l=r.toResolveHierarchy(d);l.forEach(function(h){f.indexOf(h)<0&&f.push(h)})};u(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(c){return u(c)}),f.forEach(function(c){n.allOptions.ns.forEach(function(d){i.read(c,d,"read",null,null,function(l,h){l&&s.warn("loading namespace ".concat(d," for language ").concat(c," failed"),l),!l&&h&&s.log("loaded namespace ".concat(d," for language ").concat(c),h),i.loaded("".concat(c,"|").concat(d),l,h)})})})}}}]),o}();k.type="backend";export{k as B};
